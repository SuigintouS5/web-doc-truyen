{% extends "base.html" %}
{% load static %}

{% block title %}ÄÄƒng nháº­p | ÄÄƒng kÃ½{% endblock %}

{% block content %}

<!-- CSS riÃªng cho login -->
<link rel="stylesheet" href="{% static 'css/login.css' %}">

{# ===== AUTO OPEN MODAL KHI CÃ“ MESSAGE ===== #}
{% if messages %}
  {% with messages.0 as message %}
    <script>
      window.AUTH_OPEN = true;
      window.AUTH_MODE = "{{ message.tags }}";  // login | register
    </script>
  {% endwith %}
{% endif %}

<!-- ================= AUTH OVERLAY ================= -->
<div class="auth-overlay" id="authOverlay">

  <div class="auth-modal">

    <!-- Close -->
    <button class="auth-close" id="closeAuth" type="button">Ã—</button>

    <!-- Header -->
    <div class="auth-header">
      <div class="auth-logo">A</div>
      <h2 id="authTitle">ÄÄƒng nháº­p</h2>
      <p id="authDesc">ChÃ o má»«ng báº¡n quay láº¡i</p>
    </div>

    <!-- ================= LOGIN FORM ================= -->
    <form
      method="post"
      action="{% url 'user-login' %}"
      class="auth-form active"
      id="loginForm"
    >
      {% csrf_token %}

      <div class="form-group">
        <label>Email hoáº·c TÃªn Ä‘Äƒng nháº­p</label>
        <input type="text" name="username" required>
      </div>

      <div class="form-group">
        <label>Máº­t kháº©u</label>
        <div class="password-wrapper">
          <input type="password" name="password" required>
          <span class="toggle-password" title="Hiá»‡n / áº¨n máº­t kháº©u">ğŸ‘</span>
        </div>
      </div>

      <div class="auth-extra">
        <a href="#">QuÃªn máº­t kháº©u?</a>
      </div>

      <button type="submit" class="auth-btn">
        ÄÄƒng nháº­p
      </button>

      <div class="divider">Hoáº·c</div>

      <div class="social-buttons">
        <button type="button">Google</button>
        <button type="button">Facebook</button>
      </div>

      <div class="switch-auth">
        ChÆ°a cÃ³ tÃ i khoáº£n?
        <span data-switch="register">ÄÄƒng kÃ½</span>
      </div>
    </form>

    <!-- ================= REGISTER FORM ================= -->
    <form
      method="post"
      action="{% url 'user-register' %}"
      class="auth-form"
      id="registerForm"
    >
      {% csrf_token %}

      <div class="form-group">
        <label>TÃªn Ä‘Äƒng nháº­p</label>
        <input type="text" name="username" required>
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" name="email" required>
      </div>

      <div class="form-group">
        <label>Máº­t kháº©u</label>
        <input type="password" name="password" minlength="6" required>
      </div>

      <div class="form-group">
        <label>XÃ¡c nháº­n máº­t kháº©u</label>
        <input type="password" name="password_confirm" required>
      </div>

      <label class="checkbox">
        <input type="checkbox" name="agree_terms" required>
        <span>TÃ´i Ä‘á»“ng Ã½ vá»›i Äiá»u khoáº£n & ChÃ­nh sÃ¡ch</span>
      </label>

      <button type="submit" class="auth-btn">
        ÄÄƒng kÃ½
      </button>

      <div class="switch-auth">
        ÄÃ£ cÃ³ tÃ i khoáº£n?
        <span data-switch="login">ÄÄƒng nháº­p</span>
      </div>
    </form>

  </div>
</div>

<!-- JS -->
<script src="{% static 'img/login.js' %}"></script>

{% endblock %}
